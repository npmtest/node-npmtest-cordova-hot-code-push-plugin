<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-cordova-hot-code-push-plugin/node_modules/cordova-hot-code-push-plugin/scripts/afterPrepareHook.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-cordova-hot-code-push-plugin">npmtest-cordova-hot-code-push-plugin (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-cordova-hot-code-push-plugin/node_modules/cordova-hot-code-push-plugin/scripts/afterPrepareHook.js</span></h1>
    <h2>
        
        Statements: <span class="metric">19.74% <small>(15 / 76)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 26)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 9)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">19.74% <small>(15 / 76)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-cordova-hot-code-push-plugin/node_modules/cordova-hot-code-push-plugin/scripts/</a> &#187; afterPrepareHook.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
This hook is executed every time we build the project.
It will populate config.xml with plugin specific options.
If you want to specify for which server to build the project - you can create chcpbuild.options and put your servers like so:
  {
    "build_name_1": {
      "config-file": "https://some/path/to/chcp.json"
    },
    "build_name_2": {
      "config-file": "https://some/other/path/to/chcp.json",
      "local-development": {
        "enabled": true
      }
    },
    ...
  }
File contains list of build options in JSON format.
After it is set you can run build command like that:
  cordova build -- build_name_1
&nbsp;
If no option is provided - hook will use .chcpenv file to build for local development.
More information can be found on https://github.com/nordnet/cordova-hot-code-push.
*/
&nbsp;
var chcpBuildOptions = require('./lib/chcpBuildOptions.js');
var chcpConfigXmlReader = require('./lib/chcpConfigXmlReader.js');
var chcpConfigXmlWriter = require('./lib/chcpConfigXmlWriter.js');
var iosWKWebViewEngineSupport = require('./lib/iosWKWebViewEngineSupport.js');
var BUILD_OPTION_PREFIX = 'chcp-';
var RELEASE_BUILD_FLAG = '--release';
&nbsp;
<span class="fstat-no" title="function not covered" >function logStart() {</span>
<span class="cstat-no" title="statement not covered" >  console.log('CHCP plugin after prepare hook:');</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function printLog(msg) {</span>
<span class="cstat-no" title="statement not covered" >  var formattedMsg = '    ' + msg;</span>
<span class="cstat-no" title="statement not covered" >  console.log(formattedMsg);</span>
}
&nbsp;
/**
 * Read arguments from console.
 * We are reading only plugin-related preferences.
 *
 * @param {Object} ctx - cordova context object
 * @return {Object} parsed arguments; if none were provided - default options are returned
 */
<span class="fstat-no" title="function not covered" >function processConsoleOptions(ctx) {</span>
<span class="cstat-no" title="statement not covered" >  var consoleOptions = ctx.opts.options;</span>
&nbsp;
  // If we are using Cordova 5.3.3 or lower - arguments are array of strings.
  // Will be removed after some time.
<span class="cstat-no" title="statement not covered" >  if (consoleOptions instanceof Array) {</span>
<span class="cstat-no" title="statement not covered" >    return processConsoleOptions_cordova_53(consoleOptions);</span>
  }
&nbsp;
  // for newer version of Cordova - they are an object of properties
<span class="cstat-no" title="statement not covered" >  return processConsoleOptions_cordova_54(consoleOptions);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function processConsoleOptions_cordova_53(consoleOptions) {</span>
<span class="cstat-no" title="statement not covered" >  var parsedOptions = {</span>
    isRelease: false,
    buildOption: ''
  };
&nbsp;
  // Search for release flag, or plugin-specific build options.
<span class="cstat-no" title="statement not covered" >  for (var idx in consoleOptions) {</span>
<span class="cstat-no" title="statement not covered" >    var opt = consoleOptions[idx];</span>
<span class="cstat-no" title="statement not covered" >    if (opt === RELEASE_BUILD_FLAG) {</span>
<span class="cstat-no" title="statement not covered" >      parsedOptions.isRelease = true;</span>
<span class="cstat-no" title="statement not covered" >      break;</span>
    } else <span class="cstat-no" title="statement not covered" >if (opt.indexOf(BUILD_OPTION_PREFIX) == 0) {</span>
<span class="cstat-no" title="statement not covered" >      parsedOptions.buildOption = opt.replace(BUILD_OPTION_PREFIX, '');</span>
<span class="cstat-no" title="statement not covered" >      break;</span>
    }
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return parsedOptions;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function isString(s) {</span>
<span class="cstat-no" title="statement not covered" >  return typeof(s) === 'string' || s instanceof String;</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function processConsoleOptions_cordova_54(consoleOptions) {</span>
  // For now it's like this for backwards capability.
  // Will be simplified later, when Cordova 5.4.x will be used more wide.
<span class="cstat-no" title="statement not covered" >  var parsedOptions = {</span>
    isRelease: false,
    buildOption: ''
  };
&nbsp;
  // if building for release - save that and exit
<span class="cstat-no" title="statement not covered" >  if (consoleOptions.hasOwnProperty('release')) {</span>
<span class="cstat-no" title="statement not covered" >    parsedOptions.isRelease = consoleOptions.release;</span>
<span class="cstat-no" title="statement not covered" >    return parsedOptions;</span>
  }
&nbsp;
  // search for plugin specific build options
<span class="cstat-no" title="statement not covered" >  var args = consoleOptions.argv;</span>
<span class="cstat-no" title="statement not covered" >  for (var idx in args) {</span>
<span class="cstat-no" title="statement not covered" >    var opt = args[idx];</span>
<span class="cstat-no" title="statement not covered" >    if (!isString(opt)) {</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (opt.indexOf(BUILD_OPTION_PREFIX) === -1) {</span>
<span class="cstat-no" title="statement not covered" >      continue;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    parsedOptions.buildOption = opt.replace(BUILD_OPTION_PREFIX, '');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    break;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  return parsedOptions;</span>
}
&nbsp;
/**
 * Try to inject build options according to the arguments from the console.
 *
 * @param {Object} ctx - cordova context object
 * @param {String} optionName - build option name from console; will be mapped to configuration from chcpbuild.options file
 * @return {boolean} true - if build option is found and we successfully injected it into config.xml; otherwise - false
 */
<span class="fstat-no" title="function not covered" >function prepareWithCustomBuildOption(ctx, optionName, chcpXmlOptions) {</span>
<span class="cstat-no" title="statement not covered" >  if (optionName.length == 0) {</span>
<span class="cstat-no" title="statement not covered" >    return false;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  var buildConfig = chcpBuildOptions.getBuildConfigurationByName(ctx, optionName);</span>
<span class="cstat-no" title="statement not covered" >  if (buildConfig == null) {</span>
<span class="cstat-no" title="statement not covered" >    console.warn('Build configuration for "' + optionName + '" not found in chcp.options. Ignoring it.');</span>
<span class="cstat-no" title="statement not covered" >    return false;</span>
  }
&nbsp;
<span class="cstat-no" title="statement not covered" >  console.log('Using config from chcp.options:');</span>
<span class="cstat-no" title="statement not covered" >  console.log(JSON.stringify(buildConfig, null, 2));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  mergeBuildOptions(chcpXmlOptions, buildConfig);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  console.log('Resulting config will contain the following preferences:');</span>
<span class="cstat-no" title="statement not covered" >  console.log(JSON.stringify(chcpXmlOptions, null, 2));</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  chcpConfigXmlWriter.writeOptions(ctx, chcpXmlOptions);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  return true;</span>
}
&nbsp;
/**
 * Merge build options into current config.xml preferences.
 *
 * @param {Object} currentXmlOptions - current plugin preferences from config.xml
 * @param {Object} buildConfig - build config preferences
 */
<span class="fstat-no" title="function not covered" >function mergeBuildOptions(currentXmlOptions, buildConfig) {</span>
<span class="cstat-no" title="statement not covered" >  for (var key in buildConfig) {</span>
<span class="cstat-no" title="statement not covered" >    currentXmlOptions[key] = buildConfig[key];</span>
  }
}
&nbsp;
module.exports = <span class="fstat-no" title="function not covered" >function(ctx) {</span>
<span class="cstat-no" title="statement not covered" >  var buildConfig,</span>
    chcpXmlOptions;
&nbsp;
<span class="cstat-no" title="statement not covered" >  logStart();</span>
&nbsp;
  // apply iOS-specific stuff
<span class="cstat-no" title="statement not covered" >  if (ctx.opts.platforms.indexOf('ios') !== -1) {</span>
<span class="cstat-no" title="statement not covered" >    iosWKWebViewEngineSupport.setWKWebViewEngineMacro(ctx);</span>
  }
&nbsp;
  // if we are running build with --release option - do nothing
<span class="cstat-no" title="statement not covered" >  var consoleOptions = processConsoleOptions(ctx);</span>
<span class="cstat-no" title="statement not covered" >  if (consoleOptions.isRelease) {</span>
<span class="cstat-no" title="statement not covered" >    printLog('Building for release, not changing config.xml');</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
  }
&nbsp;
  // read plugin preferences from config.xml
<span class="cstat-no" title="statement not covered" >  chcpXmlOptions = chcpConfigXmlReader.readOptions(ctx);</span>
&nbsp;
  // if any build option is provided in console - try to map it with chcpbuild.options
<span class="cstat-no" title="statement not covered" >  if (prepareWithCustomBuildOption(ctx, consoleOptions.buildOption, chcpXmlOptions)) {</span>
<span class="cstat-no" title="statement not covered" >    return;</span>
  }
&nbsp;
  // if none of the above
<span class="cstat-no" title="statement not covered" >  if (!chcpXmlOptions['config-file']) {</span>
<span class="cstat-no" title="statement not covered" >    printLog('config-file preference is not set.');</span>
  } else {
<span class="cstat-no" title="statement not covered" >    printLog('config-file set to ' + chcpXmlOptions['config-file']['url']);</span>
  }
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Sun Apr 23 2017 13:56:16 GMT+0000 (UTC)</div>
</div>
</body>
</html>
